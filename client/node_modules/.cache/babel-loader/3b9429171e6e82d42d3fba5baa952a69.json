{"ast":null,"code":"var _jsxFileName = \"/Users/oscar/Desktop/test/Tempify/client/src/components/Navbar/Navbar.js\";\nimport React, { Component } from 'react';\nimport { AppBar, Toolbar, Typography, List, ListItem, Grid, SwipeableDrawer } from '@material-ui/core';\nimport MenuIcon from '@material-ui/icons/Menu';\nimport './Navbar.css';\nimport logo from '../../images/Tempify_resized.png';\nimport { NavLink, Link, Route, Switch, withRouter } from \"react-router-dom\";\nimport Login from '../Login/Login';\nimport About from '../About/About';\nimport Modal from '../Modal/Modal';\nimport Home from '../Home/Home';\nimport Dashboard from '../Dashboard/Dashboard';\nimport TempRegister from '../Register/TempRegister';\nimport DentalRegister from '../Register/DentalRegister';\n\nclass Navbar extends Component {\n  constructor(props) {\n    super(props);\n\n    this.loginHandler = (event, authData) => {\n      event.preventDefault();\n      fetch(\"http://localhost:3001/login\", {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          email: authData.email,\n          password: authData.password\n        })\n      }).then(res => {\n        if (res.status === 422) {\n          throw new Error(\"Validation failed!\");\n        }\n\n        if (res.status !== 200 && res.status !== 201) {\n          throw new Error('Authentication failed!');\n        }\n\n        return res.json();\n      }).then(resData => {\n        console.log(resData);\n        this.setState({\n          isAuth: true,\n          userId: resData.userId,\n          role: resData.role\n        });\n        localStorage.setItem('token', resData.token);\n        localStorage.setItem('userId', resData.userId);\n        const remainingMilliseconds = 60 * 60 * 1000;\n        const expiryDate = new Date(new Date().getTime() + remainingMilliseconds);\n        localStorage.setItem('expiryDate', expiryDate.toISOString());\n        this.setAutoLogout(remainingMilliseconds);\n\n        if (this.state.isAuth) {\n          this.props.history.push(\"/dashboard\");\n        }\n      }).catch(err => {\n        this.setState({\n          isAuth: false,\n          error: err\n        });\n      });\n    };\n\n    this.state = {\n      drawerActivate: false,\n      drawer: false,\n      isAuth: false,\n      role: -1\n    };\n    this.loginHandler = this.loginHandler.bind(this);\n    this.setAutoLogout = this.setAutoLogout.bind(this);\n    this.logoutHandler = this.logoutHandler.bind(this);\n  }\n\n  componentWillMount() {\n    if (window.innerWidth <= 900) {\n      this.setState({\n        drawerActivate: true\n      });\n    }\n\n    window.addEventListener('resize', () => {\n      if (window.innerWidth <= 900) {\n        this.setState({\n          drawerActivate: true\n        });\n      } else {\n        this.setState({\n          drawerActivate: false\n        });\n      }\n    });\n    const token = localStorage.getItem('token');\n    const expiryDate = localStorage.getItem('expiryDate');\n\n    if (!token || !expiryDate) {\n      return;\n    }\n\n    if (new Date(expiryDate <= new Date())) {\n      this.logoutHandler();\n      return;\n    }\n\n    const userId = localStorage.getItem('userId');\n    const remainingMilliseconds = new Date(expiryDate).getTime() - new Date().getTime();\n    this.setState({\n      isAuth: true,\n      token: token,\n      userId: userId\n    });\n    this.setAutoLogout(remainingMilliseconds);\n  }\n\n  logoutHandler() {\n    this.setState({\n      isAuth: false,\n      token: null,\n      role: -1\n    });\n    localStorage.removeItem('token');\n    localStorage.removeItem('expiryDate');\n    localStorage.removeItem('userId');\n  }\n\n  setAutoLogout(milliseconds) {\n    setTimeout(() => {\n      this.logoutHandler();\n    }, milliseconds);\n  }\n\n  //Small Screens\n  createDrawer() {\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 148\n      },\n      __self: this\n    }, React.createElement(AppBar, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 149\n      },\n      __self: this\n    }, React.createElement(Toolbar, {\n      className: \"nav-color\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 150\n      },\n      __self: this\n    }, React.createElement(Grid, {\n      container: true,\n      direction: \"row\",\n      justify: \"space-between\",\n      alignItems: \"center\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 151\n      },\n      __self: this\n    }, React.createElement(MenuIcon, {\n      className: \"sideBarIcon\",\n      onClick: () => {\n        this.setState({\n          drawer: true\n        });\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 152\n      },\n      __self: this\n    }), React.createElement(Link, {\n      to: \"/home\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 155\n      },\n      __self: this\n    }, React.createElement(\"img\", {\n      src: logo,\n      className: \"logo\",\n      component: NavLink,\n      to: '/home',\n      alt: \"logo\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 156\n      },\n      __self: this\n    })), React.createElement(Typography, {\n      color: \"inherit\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 158\n      },\n      __self: this\n    })))), React.createElement(SwipeableDrawer, {\n      open: this.state.drawer,\n      onClose: () => {\n        this.setState({\n          drawer: false\n        });\n      },\n      onOpen: () => {\n        this.setState({\n          drawer: true\n        });\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 163\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      tabIndex: 0,\n      role: \"button\",\n      onClick: () => {\n        this.setState({\n          drawer: false\n        });\n      },\n      onKeyDown: () => {\n        this.setState({\n          drawer: false\n        });\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 168\n      },\n      __self: this\n    }, this.state.role == -1 && React.createElement(List, {\n      className: \"list\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 175\n      },\n      __self: this\n    }, React.createElement(ListItem, {\n      key: 1,\n      button: true,\n      divider: true,\n      className: \"nav-item item-height\",\n      activeStyle: {\n        color: '#53bed5'\n      },\n      component: NavLink,\n      to: '/home',\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 176\n      },\n      __self: this\n    }, \" Home \"), React.createElement(ListItem, {\n      key: 2,\n      button: true,\n      divider: true,\n      className: \"nav-item item-height\",\n      activeStyle: {\n        color: '#53bed5'\n      },\n      component: NavLink,\n      to: '/about',\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 178\n      },\n      __self: this\n    }, \" About Us \"), React.createElement(ListItem, {\n      key: 3,\n      button: true,\n      divider: true,\n      className: \"nav-item item-height\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 180\n      },\n      __self: this\n    }, \" Book Now \"), React.createElement(ListItem, {\n      key: 4,\n      button: true,\n      divider: true,\n      className: \"nav-item item-height\",\n      activeStyle: {\n        color: '#53bed5'\n      },\n      component: NavLink,\n      to: '/register',\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 181\n      },\n      __self: this\n    }, \" Become a Temp \"), React.createElement(ListItem, {\n      key: 5,\n      button: true,\n      divider: true,\n      className: \"nav-item item-height\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 183\n      },\n      __self: this\n    }, \" Contact Us \"), React.createElement(ListItem, {\n      key: 6,\n      button: true,\n      divider: true,\n      className: \"nav-item item-height\",\n      activeStyle: {\n        color: '#53bed5'\n      },\n      component: NavLink,\n      to: '/login',\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 184\n      },\n      __self: this\n    }, \" Login \")), this.state.role == 1 && React.createElement(List, {\n      className: \"list\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 189\n      },\n      __self: this\n    }, React.createElement(ListItem, {\n      key: 1,\n      button: true,\n      divider: true,\n      className: \"nav-item item-height\",\n      activeStyle: {\n        color: '#53bed5'\n      },\n      component: NavLink,\n      to: '/home',\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 190\n      },\n      __self: this\n    }, \" Home \"), React.createElement(ListItem, {\n      key: 2,\n      button: true,\n      divider: true,\n      className: \"nav-item item-height\",\n      activeStyle: {\n        color: '#53bed5'\n      },\n      component: NavLink,\n      to: '/',\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 192\n      },\n      __self: this\n    }, \" Profile \"), React.createElement(ListItem, {\n      key: 3,\n      button: true,\n      divider: true,\n      className: \"nav-item item-height\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 194\n      },\n      __self: this\n    }, \" Dashboard \"), React.createElement(ListItem, {\n      key: 6,\n      button: true,\n      divider: true,\n      className: \"nav-item item-height\",\n      activeStyle: {\n        color: '#53bed5'\n      },\n      component: NavLink,\n      to: '/',\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 195\n      },\n      __self: this\n    }, \" Logout \")), this.state.role == 2 && React.createElement(List, {\n      className: \"list\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 200\n      },\n      __self: this\n    }, React.createElement(ListItem, {\n      key: 1,\n      button: true,\n      divider: true,\n      className: \"nav-item item-height\",\n      activeStyle: {\n        color: '#53bed5'\n      },\n      component: NavLink,\n      to: '/home',\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 201\n      },\n      __self: this\n    }, \" Home \"), React.createElement(ListItem, {\n      key: 2,\n      button: true,\n      divider: true,\n      className: \"nav-item item-height\",\n      activeStyle: {\n        color: '#53bed5'\n      },\n      component: NavLink,\n      to: '/',\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 203\n      },\n      __self: this\n    }, \" Profile \"), React.createElement(ListItem, {\n      key: 3,\n      button: true,\n      divider: true,\n      className: \"nav-item item-height\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 205\n      },\n      __self: this\n    }, \" Dashboard \"), React.createElement(ListItem, {\n      key: 4,\n      button: true,\n      divider: true,\n      className: \"nav-item item-height\",\n      activeStyle: {\n        color: '#53bed5'\n      },\n      component: NavLink,\n      to: '/',\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 206\n      },\n      __self: this\n    }, \" Job Postings \"), React.createElement(ListItem, {\n      key: 5,\n      button: true,\n      divider: true,\n      className: \"nav-item item-height\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 208\n      },\n      __self: this\n    }, \" My Availability \"), React.createElement(ListItem, {\n      key: 6,\n      button: true,\n      divider: true,\n      className: \"nav-item item-height\",\n      activeStyle: {\n        color: '#53bed5'\n      },\n      component: NavLink,\n      to: '/',\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 209\n      },\n      __self: this\n    }, \" Logout \")))));\n  } //Larger Screens\n\n\n  destroyDrawer() {\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 222\n      },\n      __self: this\n    }, React.createElement(AppBar, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 223\n      },\n      __self: this\n    }, React.createElement(Toolbar, {\n      className: \"nav-color\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 224\n      },\n      __self: this\n    }, React.createElement(Link, {\n      to: \"/home\",\n      className: \"logo-container\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 225\n      },\n      __self: this\n    }, React.createElement(\"img\", {\n      src: logo,\n      className: \"logo\",\n      alt: \"logo\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 226\n      },\n      __self: this\n    })), this.state.role == -1 && React.createElement(React.Fragment, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 229\n      },\n      __self: this\n    }, React.createElement(Typography, {\n      variant: \"subheading\",\n      className: \"padding nav-item\",\n      activeStyle: {\n        color: '#53bed5'\n      },\n      component: NavLink,\n      to: '/home',\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 230\n      },\n      __self: this\n    }, \"Home\"), React.createElement(Typography, {\n      variant: \"subheading\",\n      className: \"padding nav-item\",\n      activeStyle: {\n        color: '#53bed5'\n      },\n      component: NavLink,\n      to: '/about',\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 232\n      },\n      __self: this\n    }, \"About Us\"), React.createElement(Typography, {\n      variant: \"subheading\",\n      className: \"padding nav-item\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 234\n      },\n      __self: this\n    }, React.createElement(Modal, {\n      name: \"Book Now\",\n      idType: \"typography\",\n      link: \"/dentalregister\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 234\n      },\n      __self: this\n    })), React.createElement(Typography, {\n      variant: \"subheading\",\n      className: \"padding nav-item\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 235\n      },\n      __self: this\n    }, React.createElement(Modal, {\n      name: \"Become a Temp\",\n      idType: \"typography\",\n      link: \"/tempregister\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 235\n      },\n      __self: this\n    })), React.createElement(Typography, {\n      variant: \"subheading\",\n      className: \"padding nav-item\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 236\n      },\n      __self: this\n    }, \"Contact Us\"), React.createElement(Typography, {\n      variant: \"subheading\",\n      className: \"nav-item\",\n      activeStyle: {\n        color: '#53bed5'\n      },\n      component: NavLink,\n      to: '/login',\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 237\n      },\n      __self: this\n    }, \"Login\")), this.state.role == 1 && React.createElement(React.Fragment, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 242\n      },\n      __self: this\n    }, React.createElement(Typography, {\n      variant: \"subheading\",\n      className: \"padding nav-item\",\n      activeStyle: {\n        color: '#53bed5'\n      },\n      component: NavLink,\n      to: '/home',\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 243\n      },\n      __self: this\n    }, \"Home\"), React.createElement(Typography, {\n      variant: \"subheading\",\n      className: \"padding nav-item\",\n      activeStyle: {\n        color: '#53bed5'\n      },\n      component: NavLink,\n      to: '/about',\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 245\n      },\n      __self: this\n    }, \"Profile\"), React.createElement(Typography, {\n      variant: \"subheading\",\n      className: \"padding nav-item\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 247\n      },\n      __self: this\n    }, \"Dashboard\"), React.createElement(Typography, {\n      variant: \"subheading\",\n      className: \"nav-item\",\n      activeStyle: {\n        color: '#53bed5'\n      },\n      component: NavLink,\n      to: '/login',\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 248\n      },\n      __self: this\n    }, \"Logout\")), this.state.role == 2 && React.createElement(React.Fragment, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 253\n      },\n      __self: this\n    }, React.createElement(Typography, {\n      variant: \"subheading\",\n      className: \"padding nav-item\",\n      activeStyle: {\n        color: '#53bed5'\n      },\n      component: NavLink,\n      to: '/home',\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 254\n      },\n      __self: this\n    }, \"Home\"), React.createElement(Typography, {\n      variant: \"subheading\",\n      className: \"padding nav-item\",\n      activeStyle: {\n        color: '#53bed5'\n      },\n      component: NavLink,\n      to: '/about',\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 256\n      },\n      __self: this\n    }, \"Profile\"), React.createElement(Typography, {\n      variant: \"subheading\",\n      className: \"padding nav-item\",\n      activeStyle: {\n        color: '#53bed5'\n      },\n      component: NavLink,\n      to: '/dashboard',\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 258\n      },\n      __self: this\n    }, \"Dashboard\"), React.createElement(Typography, {\n      variant: \"subheading\",\n      className: \"padding nav-item\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 260\n      },\n      __self: this\n    }, \"Job Postings\"), React.createElement(Typography, {\n      variant: \"subheading\",\n      className: \"padding nav-item\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 261\n      },\n      __self: this\n    }, \"My Availability\"), React.createElement(Typography, {\n      variant: \"subheading\",\n      className: \"nav-item\",\n      activeStyle: {\n        color: '#53bed5'\n      },\n      component: NavLink,\n      to: '/login',\n      onClick: this.logoutHandler,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 262\n      },\n      __self: this\n    }, \"Logout\")))));\n  }\n\n  render() {\n    let routes = React.createElement(Switch, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 275\n      },\n      __self: this\n    }, React.createElement(Route, {\n      path: \"/\",\n      exact: true,\n      component: Home,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 276\n      },\n      __self: this\n    }), React.createElement(Route, {\n      path: \"/login\",\n      exact: true,\n      render: props => React.createElement(Login, Object.assign({}, props, {\n        onLogin: this.loginHandler,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 281\n        },\n        __self: this\n      })),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 277\n      },\n      __self: this\n    }), React.createElement(Route, {\n      path: \"/home\",\n      component: Home,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 287\n      },\n      __self: this\n    }), React.createElement(Route, {\n      path: \"/about\",\n      component: About,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 288\n      },\n      __self: this\n    }), React.createElement(Route, {\n      path: \"/tempregister\",\n      component: TempRegister,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 289\n      },\n      __self: this\n    }), React.createElement(Route, {\n      path: \"/dentalregister\",\n      exact: true,\n      render: props => React.createElement(DentalRegister, Object.assign({}, props, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 294\n        },\n        __self: this\n      })),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 290\n      },\n      __self: this\n    }));\n\n    if (this.state.isAuth) {\n      routes = React.createElement(Switch, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 304\n        },\n        __self: this\n      }, React.createElement(Route, {\n        path: \"/dashboard\",\n        component: Dashboard,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 305\n        },\n        __self: this\n      }));\n    }\n\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 311\n      },\n      __self: this\n    }, this.state.drawerActivate ? this.createDrawer() : this.destroyDrawer(), routes);\n  }\n\n}\n\nexport default withRouter(Navbar);","map":{"version":3,"sources":["/Users/oscar/Desktop/test/Tempify/client/src/components/Navbar/Navbar.js"],"names":["React","Component","AppBar","Toolbar","Typography","List","ListItem","Grid","SwipeableDrawer","MenuIcon","logo","NavLink","Link","Route","Switch","withRouter","Login","About","Modal","Home","Dashboard","TempRegister","DentalRegister","Navbar","constructor","props","loginHandler","event","authData","preventDefault","fetch","method","headers","body","JSON","stringify","email","password","then","res","status","Error","json","resData","console","log","setState","isAuth","userId","role","localStorage","setItem","token","remainingMilliseconds","expiryDate","Date","getTime","toISOString","setAutoLogout","state","history","push","catch","err","error","drawerActivate","drawer","bind","logoutHandler","componentWillMount","window","innerWidth","addEventListener","getItem","removeItem","milliseconds","setTimeout","createDrawer","color","destroyDrawer","render","routes"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport {\n  AppBar, Toolbar, Typography, List, ListItem, Grid, SwipeableDrawer\n} from '@material-ui/core';\nimport MenuIcon from '@material-ui/icons/Menu';\nimport './Navbar.css';\nimport logo from '../../images/Tempify_resized.png';\nimport { NavLink, Link, Route, Switch, withRouter} from \"react-router-dom\";\nimport Login from '../Login/Login';\nimport About from '../About/About';\nimport Modal from '../Modal/Modal';\nimport Home from '../Home/Home';\nimport Dashboard from '../Dashboard/Dashboard'\nimport TempRegister from '../Register/TempRegister';\nimport DentalRegister from '../Register/DentalRegister';\n\nclass Navbar extends Component{\n\n  constructor(props){\n    super(props);\n    this.state = {\n      drawerActivate:false, \n      drawer:false,\n      isAuth: false, \n      role: -1,\n    };\n\n    this.loginHandler = this.loginHandler.bind(this);\n    this.setAutoLogout = this.setAutoLogout.bind(this);\n    this.logoutHandler = this.logoutHandler.bind(this);\n  }\n\n  componentWillMount(){\n    if(window.innerWidth <= 900){\n      this.setState({drawerActivate:true});\n    }\n\n    window.addEventListener('resize',()=>{\n      if(window.innerWidth <= 900){\n        this.setState({drawerActivate:true});\n      }\n      else{\n        this.setState({drawerActivate:false})\n      }\n    });\n\n    const token = localStorage.getItem('token');\n    const expiryDate = localStorage.getItem('expiryDate');\n\n    if(!token || !expiryDate) {\n      return; \n    }\n\n    if(new Date(expiryDate <= new Date())) {\n      this.logoutHandler();\n      return; \n    }\n\n    const userId = localStorage.getItem('userId');\n    const remainingMilliseconds = new Date(expiryDate).getTime() - new Date().getTime(); \n    \n      this.setState({\n        isAuth: true, \n        token: token,\n        userId: userId\n      });\n\n      this.setAutoLogout(remainingMilliseconds);\n  }\n\n  loginHandler = (event, authData) => {\n    event.preventDefault();\n    fetch(\"http://localhost:3001/login\", {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        email: authData.email,\n        password: authData.password,\n      })\n    }\n    )\n    .then(res => {\n      if(res.status === 422) {\n        throw new Error(\n          \"Validation failed!\"\n        );\n      }\n      if(res.status !== 200 && res.status !== 201) {\n        throw new Error('Authentication failed!');\n      }\n      return res.json();\n    })\n    .then(resData => {\n\n      console.log(resData);\n      this.setState({\n        isAuth: true, \n        userId: resData.userId,\n        role: resData.role,\n      });  \n\n      localStorage.setItem('token', resData.token);\n      localStorage.setItem('userId', resData.userId);\n\n      const remainingMilliseconds = 60 * 60 * 1000;\n      const expiryDate = new Date(\n        new Date().getTime() + remainingMilliseconds\n      );\n      localStorage.setItem('expiryDate', expiryDate.toISOString());\n      this.setAutoLogout(remainingMilliseconds);\n            \n      if(this.state.isAuth){\n        this.props.history.push(\"/dashboard\");\n      }\n\n    })\n    .catch(err => {\n      this.setState({\n        isAuth: false,\n        error: err\n      });\n    });\n  };\n\n  logoutHandler() {\n    this.setState({\n      isAuth: false, \n      token: null,\n      role: -1\n    })\n\n    localStorage.removeItem('token');\n    localStorage.removeItem('expiryDate');\n    localStorage.removeItem('userId');\n  }\n\n  setAutoLogout(milliseconds) {\n    setTimeout(() => {\n      this.logoutHandler();\n    }, milliseconds);\n  };\n\n  //Small Screens\n  createDrawer(){\n    return (\n      <div>\n        <AppBar >\n          <Toolbar className=\"nav-color\">\n            <Grid container direction = \"row\" justify = \"space-between\" alignItems=\"center\">\n              <MenuIcon\n                className = \"sideBarIcon\"\n                onClick={()=>{this.setState({drawer:true})}} />\n              <Link to=\"/home\">\n                <img src={logo} className=\"logo\" component={NavLink} to={'/home'} alt=\"logo\"/>\n              </Link>\n              <Typography color=\"inherit\"></Typography>\n            </Grid>\n          </Toolbar>\n        </AppBar>\n\n        <SwipeableDrawer\n         open={this.state.drawer}\n         onClose={()=>{this.setState({drawer:false})}}\n         onOpen={()=>{this.setState({drawer:true})}}>\n\n          <div\n            tabIndex={0}\n            role=\"button\"\n            onClick={()=>{this.setState({drawer:false})}}\n            onKeyDown={()=>{this.setState({drawer:false})}}>\n            \n            { this.state.role == -1 && (\n              <List className = \"list\">\n                <ListItem key = {1} button divider className=\"nav-item item-height\"\n                  activeStyle={{ color: '#53bed5' }} component={NavLink} to={'/home'}> Home </ListItem>\n                <ListItem key = {2} button divider className=\"nav-item item-height\"\n                  activeStyle={{ color: '#53bed5' }} component={NavLink} to={'/about'}> About Us </ListItem>\n                <ListItem key = {3} button divider className=\"nav-item item-height\"> Book Now </ListItem>\n                <ListItem key = {4} button divider className=\"nav-item item-height\"\n                  activeStyle={{ color: '#53bed5' }} component={NavLink} to={'/register'}> Become a Temp </ListItem>\n                <ListItem key = {5} button divider className=\"nav-item item-height\"> Contact Us </ListItem>\n                <ListItem key = {6} button divider className=\"nav-item item-height\" \n                  activeStyle={{ color: '#53bed5' }} component={NavLink} to={'/login'}> Login </ListItem>\n              </List>)\n            }\n            { this.state.role == 1 && (\n              <List className = \"list\">\n                <ListItem key = {1} button divider className=\"nav-item item-height\"\n                  activeStyle={{ color: '#53bed5' }} component={NavLink} to={'/home'}> Home </ListItem>\n                <ListItem key = {2} button divider className=\"nav-item item-height\"\n                  activeStyle={{ color: '#53bed5' }} component={NavLink} to={'/'}> Profile </ListItem>\n                <ListItem key = {3} button divider className=\"nav-item item-height\"> Dashboard </ListItem>\n                <ListItem key = {6} button divider className=\"nav-item item-height\" \n                  activeStyle={{ color: '#53bed5' }} component={NavLink} to={'/'}> Logout </ListItem>\n              </List>)\n            }\n            { this.state.role == 2 && (\n              <List className = \"list\">\n                <ListItem key = {1} button divider className=\"nav-item item-height\"\n                  activeStyle={{ color: '#53bed5' }} component={NavLink} to={'/home'}> Home </ListItem>\n                <ListItem key = {2} button divider className=\"nav-item item-height\"\n                  activeStyle={{ color: '#53bed5' }} component={NavLink} to={'/'}> Profile </ListItem>\n                <ListItem key = {3} button divider className=\"nav-item item-height\"> Dashboard </ListItem>\n                <ListItem key = {4} button divider className=\"nav-item item-height\"\n                  activeStyle={{ color: '#53bed5' }} component={NavLink} to={'/'}> Job Postings </ListItem>\n                <ListItem key = {5} button divider className=\"nav-item item-height\"> My Availability </ListItem>\n                <ListItem key = {6} button divider className=\"nav-item item-height\" \n                  activeStyle={{ color: '#53bed5' }} component={NavLink} to={'/'}> Logout </ListItem>\n              </List>)\n            }\n          </div>\n       </SwipeableDrawer> \n      </div>\n    );\n  }\n\n  //Larger Screens\n  destroyDrawer(){\n    return (\n      <div>\n        <AppBar >\n          <Toolbar className=\"nav-color\">\n            <Link to=\"/home\" className=\"logo-container\">\n              <img src={logo} className=\"logo\" alt=\"logo\"/>\n            </Link>\n            { this.state.role == -1 && (\n              <React.Fragment>\n                <Typography variant = \"subheading\" className = \"padding nav-item\"\n                  activeStyle={{ color: '#53bed5' }} component={NavLink} to={'/home'}>Home</Typography>\n                <Typography variant = \"subheading\" className = \"padding nav-item\"\n                  activeStyle={{ color: '#53bed5' }} component={NavLink} to={'/about'}>About Us</Typography>\n                <Typography variant = \"subheading\" className = \"padding nav-item\"><Modal name=\"Book Now\" idType=\"typography\" link=\"/dentalregister\"/></Typography>\n                <Typography variant = \"subheading\" className = \"padding nav-item\"><Modal name = \"Become a Temp\" idType=\"typography\" link=\"/tempregister\"/></Typography>\n                <Typography variant = \"subheading\" className = \"padding nav-item\">Contact Us</Typography>\n                <Typography variant = \"subheading\" className = \"nav-item\" \n                  activeStyle={{ color: '#53bed5' }} component={NavLink} to={'/login'}>Login</Typography>\n              </React.Fragment>)\n            }\n            { this.state.role == 1 && (\n              <React.Fragment>\n                <Typography variant = \"subheading\" className = \"padding nav-item\"\n                  activeStyle={{ color: '#53bed5' }} component={NavLink} to={'/home'}>Home</Typography>\n                <Typography variant = \"subheading\" className = \"padding nav-item\"\n                  activeStyle={{ color: '#53bed5' }} component={NavLink} to={'/about'}>Profile</Typography>\n                <Typography variant = \"subheading\" className = \"padding nav-item\">Dashboard</Typography>\n                <Typography variant = \"subheading\" className = \"nav-item\" \n                  activeStyle={{ color: '#53bed5' }} component={NavLink} to={'/login'}>Logout</Typography>\n              </React.Fragment>)\n            }\n            { this.state.role == 2 && (\n              <React.Fragment>\n                <Typography variant = \"subheading\" className = \"padding nav-item\"\n                  activeStyle={{ color: '#53bed5' }} component={NavLink} to={'/home'}>Home</Typography>\n                <Typography variant = \"subheading\" className = \"padding nav-item\"\n                  activeStyle={{ color: '#53bed5' }} component={NavLink} to={'/about'}>Profile</Typography>\n                <Typography variant = \"subheading\" className = \"padding nav-item\"\n                  activeStyle={{ color: '#53bed5' }} component={NavLink} to={'/dashboard'}>Dashboard</Typography>\n                <Typography variant = \"subheading\" className = \"padding nav-item\">Job Postings</Typography>\n                <Typography variant = \"subheading\" className = \"padding nav-item\">My Availability</Typography>\n                <Typography variant = \"subheading\" className = \"nav-item\" \n                  activeStyle={{ color: '#53bed5' }} component={NavLink} to={'/login'} onClick ={this.logoutHandler}>Logout</Typography>\n              </React.Fragment>)\n            }\n          </Toolbar>\n        </AppBar>\n      </div>\n    )\n  }\n\n  render(){\n\n    let routes = (\n      <Switch>\n      <Route path='/' exact component={Home} />\n      <Route\n        path=\"/login\"\n        exact\n        render= {props => (\n          <Login\n            {...props}\n            onLogin = { this.loginHandler }\n          />\n        )}\n      />\n      <Route path=\"/home\" component={Home} />\n      <Route path=\"/about\" component={About} />\n      <Route path=\"/tempregister\" component={TempRegister} />\n      <Route\n        path=\"/dentalregister\"\n        exact\n        render= {props => (\n          <DentalRegister\n            {...props}\n          />\n        )}\n      />\n    </Switch>\n    );\n\n    if(this.state.isAuth) {\n      routes = (\n        <Switch>\n          <Route path=\"/dashboard\" component={Dashboard} />\n        </Switch>\n      )\n    }\n\n    return(\n      <div>\n        {this.state.drawerActivate ? this.createDrawer() : this.destroyDrawer()}\n        { routes }\n      </div>\n    );\n  }\n}\n\nexport default withRouter(Navbar);"]},"metadata":{},"sourceType":"module"}